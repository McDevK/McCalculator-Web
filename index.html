<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McCalculator - Áîü‰∫ßËÆ°ÁÆóÂô®</title>
    
    <!-- Favicon ÂõæÊ†á -->
    <link rel="icon" type="image/webp" sizes="16x16" href="assets/icons/favicon/favicon.webp">
    <link rel="icon" type="image/webp" sizes="32x32" href="assets/icons/favicon/favicon.webp">
    <link rel="icon" type="image/webp" sizes="48x48" href="assets/icons/favicon/favicon.webp">
    <link rel="icon" type="image/webp" sizes="64x64" href="assets/icons/favicon/favicon.webp">
    <link rel="icon" type="image/webp" sizes="128x128" href="assets/icons/favicon/favicon.webp">
    <link rel="icon" type="image/webp" sizes="256x256" href="assets/icons/favicon/favicon.webp">
    <link rel="apple-touch-icon" href="assets/icons/favicon/favicon.webp">
    <link rel="shortcut icon" href="assets/icons/favicon/favicon.webp">
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-hammer"></i>
                <span>QQ14 Áîü‰∫ßËÆ°ÁÆóÂô®</span>
            </div>
            <div class="header-right">
                <!-- ËâæÊ¨ßÊ≥Ω‰∫öÊó∂ÈíüÊòæÁ§∫ -->
                <div id="eorzeaTimeBox" class="local-time-box">
                    <span class="local-time-label">Ëâæ</span>
                    <span class="local-time-value" id="eorzeaTimeValue">00:00</span>
                </div>
                <!-- Êú¨Âú∞Êó∂Èó¥ÊòæÁ§∫ -->
                <div id="localTimeBox" class="local-time-box">
                    <span class="local-time-label">Êú¨</span>
                    <span class="local-time-value" id="localTimeValue">00:00</span>
                </div>
                <!-- Ê°åÈù¢/ÁßªÂä®Á´ØÂàáÊç¢ÊåâÈíÆ -->
                <button class="device-toggle" id="deviceToggle" title="ÂàáÊç¢Âà∞ÁßªÂä®Á´Ø">
                    <img src="assets/icons/button/mobile.png" alt="ÁßªÂä®Á´Ø" class="device-icon">
                </button>
                 <!-- Â§©Ê∞îÈ¢ÑÊä•ÊåâÈíÆ -->
                 <button class="weather-toggle" id="weatherToggle" title="Â§©Ê∞îÈ¢ÑÊä•">
                     <i class="fas fa-cloud-sun"></i>
                 </button>
                <!-- ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ -->
                <button class="theme-toggle" id="themeToggle" title="ÂàáÊç¢‰∏ªÈ¢ò">
                    <i class="fas fa-moon"></i>
                </button>
                <!-- ‰ΩúËÄÖ‰ø°ÊÅØ -->
                <div class="author-info">
                    <!-- È∫¶Êª°ÂàÜüå∏ÈªÑÈáëË∞∑ È∫¶ÂΩìÂä≥üå∏ÈªÑÈáëË∞∑-->
                </div>
            </div>
        </div>
    </header>
    <!-- Â§©Ê∞îÈ¢ÑÊä•ÊµÆÁ™ó -->
    <div class="weather-panel" id="weatherPanel" aria-hidden="true">
        <div class="weather-panel-header">
            <div class="weather-panel-title"><i class="fas fa-cloud-sun"></i> Â§©Ê∞îÈ¢ÑÊä•</div>
            <div class="weather-header-actions">
                <button class="weather-time-toggle" id="weatherTimeToggle" title="ÁÇπÂáªÂàáÊç¢ ET/LT" aria-label="ÂàáÊç¢Êó∂Èó¥ÊòæÁ§∫">
                    <span style="user-select:none;-webkit-user-select:none;font-weight:800;">LT</span>
                </button>
                <button class="weather-time-toggle" id="weatherModeToggle" title="ÂÖ®Â±ÄÂ§©Ê∞îÊêúÁ¥¢" aria-label="ÂÖ®Â±ÄÂ§©Ê∞îÊêúÁ¥¢">
                    <img src="assets/icons/button/switch.png" alt="Global" style="width:16px;height:16px;object-fit:contain;filter:brightness(0.95)">
                </button>
                <button class="weather-panel-close" id="weatherPanelClose" title="ÂÖ≥Èó≠">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="weather-panel-body">
            <div class="weather-controls">
                <select id="weatherZoneSelect" class="weather-zone-select" aria-label="ÈÄâÊã©Âú∞Âå∫"></select>
                <span class="weather-interval-tip">ÊØè8ËâæÊ¨ßÊ≥Ω‰∫öÂ∞èÊó∂Âà∑Êñ∞</span>
            </div>
            <div class="weather-forecast-list" id="weatherForecastList">
                <!-- È¢ÑÊµãÂàóË°®ÈÄöËøáËÑöÊú¨Ê∏≤Êüì -->
            </div>
            <!-- Â§©Ê∞îÁ±ªÂûãÂõæÊ†áÊåâÈíÆÔºà‰∏§ÊéíÔºö8 + 7Ôºâ -->
            <div class="weather-icon-grid" id="weatherIconGrid" aria-label="Â§©Ê∞îÁ±ªÂûãÂø´ÈÄüÊü•Áúã"></div>
        </div>
    </div>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
    <main class="main-content">
        <!-- ËÆ°ÁÆóÂô®È°µÈù¢ -->
        <div class="tab-content active" id="calculator">
            <div class="calculator-container">
            <!-- Â∑¶‰æßÔºöËÅå‰∏öÈÄâÊã©‰æßËæπÊ†è -->
            <aside class="job-sidebar">
                <button class="job-tab" data-job="quickcalc">
                    <img src="assets/icons/jobs/001.webp" alt="Âø´Êç∑ËÆ°ÁÆó" class="job-icon">
                    Âø´Êç∑ËÆ°ÁÆó
                </button>
                <button class="job-tab" data-job="carpenter">
                    <img src="assets/icons/jobs/002.webp" alt="ÂàªÊú®Âå†" class="job-icon">
                    ÂàªÊú®Âå†
                </button>
                <button class="job-tab" data-job="blacksmith">
                    <img src="assets/icons/jobs/003.webp" alt="ÈîªÈìÅÂå†" class="job-icon">
                    ÈîªÈìÅÂå†
                </button>
                <button class="job-tab" data-job="armorer">
                    <img src="assets/icons/jobs/004.webp" alt="Èì∏Áî≤Âå†" class="job-icon">
                    Èì∏Áî≤Âå†
                </button>
                <button class="job-tab" data-job="goldsmith">
                    <img src="assets/icons/jobs/005.webp" alt="ÈõïÈáëÂå†" class="job-icon">
                    ÈõïÈáëÂå†
                </button>
                <button class="job-tab" data-job="leatherworker">
                    <img src="assets/icons/jobs/006.webp" alt="Âà∂Èù©Âå†" class="job-icon">
                    Âà∂Èù©Âå†
                </button>
                <button class="job-tab" data-job="weaver">
                    <img src="assets/icons/jobs/007.webp" alt="Ë£ÅË°£Âå†" class="job-icon">
                    Ë£ÅË°£Âå†
                </button>
                <button class="job-tab" data-job="alchemist">
                    <img src="assets/icons/jobs/008.webp" alt="ÁÇºÈáëÊúØÂ£´" class="job-icon">
                    ÁÇºÈáëÊúØÂ£´
                </button>
                <button class="job-tab" data-job="culinarian">
                    <img src="assets/icons/jobs/009.webp" alt="ÁÉπË∞ÉÂ∏à" class="job-icon">
                    ÁÉπË∞ÉÂ∏à
                </button>
                <button class="job-tab" data-job="miner">
                    <img src="assets/icons/jobs/010.webp" alt="ÈááÁüøÂ∑•" class="job-icon">
                    ÈááÁüøÂ∑•
                </button>
                <button class="job-tab" data-job="botanist">
                    <img src="assets/icons/jobs/011.webp" alt="Âõ≠Ëâ∫Â∑•" class="job-icon">
                    Âõ≠Ëâ∫Â∑•
                </button>
                <!-- ÊçïÈ±º‰∫∫ËÅå‰∏öÊöÇÊú™‰ΩøÁî®ÔºåÂ∑≤ÈöêËóè -->
                <!-- <button class="job-tab" data-job="fisher">
                    <img src="assets/icons/jobs/012.webp" alt="ÊçïÈ±º‰∫∫" class="job-icon">
                    ÊçïÈ±º‰∫∫
                </button> -->
            </aside>
            <!-- ‰∏≠Èó¥ÔºöÁâ©ÂìÅÈÄâÊã©Âå∫Âüü -->
            <div class="item-selection">
                <div class="section-header">
                    <div class="search-actions">
                        <button class="btn btn-fav-toggle" id="favToggleBtn" title="Âè™ÁúãÊî∂Ëóè"><i class="fas fa-star"></i></button>
                        <button class="btn btn-alarm-toggle" id="alarmToggleBtn" title="Âè™ÁúãÈóπÈíü" style="display: none;"><i class="fas fa-clock"></i></button>
                        <div class="search-box">
                            <input type="text" id="itemSearch" placeholder="ÊêúÁ¥¢Áâ©ÂìÅÂêçÁß∞...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
                <div class="items-grid" id="itemsGrid">
                    <!-- Áâ©ÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                </div>
            </div>
            <!-- Âè≥‰æßÔºöËÆ°ÁÆóÁªìÊûúÂå∫Âüü -->
            <div class="calculation-results">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> ËÆ°ÁÆóÁªìÊûú</h2>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <button class="btn btn-primary" id="clearSelectedBtn" title="Ê∏ÖÁ©∫Â∑≤ÈÄâÁâ©ÂìÅ" aria-label="Ê∏ÖÁ©∫Â∑≤ÈÄâÁâ©ÂìÅ">
                            <img src="assets/icons/button/del.png" alt="Clear" class="btn-icon" style="width:20px;height:20px;object-fit:contain;">
                        </button>
                        <button class="btn" id="exportExcelBtn" title="ÂØºÂá∫Excel" aria-label="ÂØºÂá∫Excel">
                            <img src="assets/icons/button/output.png" alt="Export" style="width:20px;height:20px;object-fit:contain;">
                        </button>
                        <button class="btn btn-primary" id="calculateBtn" aria-label="ËÆ°ÁÆóÁ¥†Êùê">
                            <span class="calculate-icon-box" style="display:inline-flex;align-items:center;gap:6px;">
                                <img src="assets/icons/button/calculate.png" alt="Calculate" class="calculate-calc-img" style="width:20px;height:20px;object-fit:contain;">
                                <img src="assets/icons/button/del.png" alt="Delete alarms" class="calculate-del-img" style="display:none;width:20px;height:20px;object-fit:contain;">
                            </span>
                            <span class="calculate-btn-text">ËÆ°ÁÆóÁ¥†Êùê</span>
                        </button>
                    </div>
                </div>
                
                <!-- Áîü‰∫ßËÅå‰∏öÂÜÖÂÆπ -->
                <div class="production-content">
                    <div class="selected-items">
                        <h3>Â∑≤ÈÄâÁâ©ÂìÅ <small style="color: var(--ff14-text-secondary); font-size: 12px;">(ÁÇπÂáªÁâ©ÂìÅÂêçÁß∞Ê†áËÆ∞ÂÆåÊàê)</small></h3>
                        <div class="selected-items-list" id="selectedItemsList">
                            <div class="empty-state">
                                <i class="fas fa-inbox"></i>
                                <p>ËØ∑ÈÄâÊã©Ë¶ÅÂà∂ÈÄ†ÁöÑÁâ©ÂìÅ</p>
                            </div>
                        </div>
                    </div>
                    <div class="materials-needed">
                        <h3>ÂçäÊàêÂìÅ <small style="color: var(--ff14-text-secondary); font-size: 12px;">(ÁÇπÂáªÁâ©ÂìÅÂêçÁß∞Ê†áËÆ∞ÂÆåÊàê)</small></h3>
                        <div class="materials-list" id="materialsList">
                            <div class="empty-state">
                                <i class="fas fa-boxes"></i>
                                <p>ÁÇπÂáªËÆ°ÁÆóÊåâÈíÆÊü•ÁúãÊâÄÈúÄÁ¥†Êùê</p>
                            </div>
                        </div>
                    </div>
                    <div class="base-materials-needed">
                        <h3>Âü∫Á°ÄÊùêÊñô <small style="color: var(--ff14-text-secondary); font-size: 12px;">(ÁÇπÂáªÁâ©ÂìÅÂêçÁß∞Ê†áËÆ∞ÂÆåÊàê)</small></h3>
                        <div class="base-materials-list" id="baseMaterialsList">
                            <div class="empty-state">
                                <i class="fas fa-boxes"></i>
                                <p>ÁÇπÂáªËÆ°ÁÆóÊåâÈíÆÊü•ÁúãÂü∫Á°ÄÊùêÊñô</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÈááÈõÜËÅå‰∏öÈóπÈíüÂÜÖÂÆπ -->
                <div class="alarm-content" style="display: none;">
                    <div class="alarm-list">
                        <!-- <h3>ÈóπÈíüÂàóË°®</h3>  // ÈááÈõÜËÅå‰∏ö‰∏ãÊñπÊ†áÁ≠æÂ∑≤ÈöêËóèÊàñÂà†Èô§ -->
                        <div class="alarm-items-list" id="alarmItemsList">
                            <div class="empty-state">
                                <i class="fas fa-clock"></i>
                                <p>ËØ∑Ê∑ªÂä†ÈóπÈíüÊèêÈÜíÁöÑÁâ©ÂìÅ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        
        <!-- Êî∂ËóèÈ°µÈù¢ -->
        <div class="tab-content" id="favorites">
            <div class="favorites-container">
                <h2><i class="fas fa-heart"></i> Êî∂ËóèÁöÑÁâ©ÂìÅ</h2>
                <div class="favorites-list" id="favoritesList">
                    <div class="empty-state">
                        <i class="fas fa-heart-broken"></i>
                        <p>ÊöÇÊó†Êî∂ËóèÁöÑÁâ©ÂìÅ</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ÁâàÊùÉ‰ø°ÊÅØ -->
    <footer class="footer">
        <div class="footer-divider"></div>
        <div class="footer-content">
            <div class="footer-info">
                <p>&copy; 2025 QQ14 Áîü‰∫ßËÆ°ÁÆóÂô® | È∫¶Êª°ÂàÜüå∏ÈªÑÈáëË∞∑  È∫¶ÂΩìÂä≥üå∏ÈªÑÈáëË∞∑</p>
                <p>Âü∫‰∫é ÊúÄÁªàÂπªÊÉ≥14Ê∞¥Êô∂‰∏ñÁïå Âà∂‰ΩúÁ≥ªÁªüÊï∞ÊçÆ | ‰ªÖ‰æõÂ≠¶‰π†‰∫§ÊµÅ‰ΩøÁî®</p>
            </div>
            <div class="footer-links">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </footer>

    <!-- Â∫ìÂ≠òÁÆ°ÁêÜÂºπÁ™ó -->
    <div class="modal" id="inventoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Â∫ìÂ≠òÁÆ°ÁêÜ</h3>
                <button class="modal-close" id="inventoryModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="inventory-input">
                    <input type="text" id="inventorySearch" placeholder="ÊêúÁ¥¢Á¥†Êùê...">
                    <div class="inventory-list" id="inventoryList">
                        <!-- Â∫ìÂ≠òÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="device-detector.js"></script>
    <script src="script.js"></script>
    <script src="cache-manager.js"></script>
    <script>
      // Ê≥®ÂÜåService WorkerÁî®‰∫éÁºìÂ≠ò
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          // ‰ΩøÁî®Áõ∏ÂØπË∑ØÂæÑÊ≥®ÂÜåService Worker
          navigator.serviceWorker.register('./sw.js')
            .then(registration => {
              console.log('SW registered: ', registration);
              // È¢ÑÁºìÂ≠òÈÖçÊñπÊï∞ÊçÆ
              if (registration.active) {
                registration.active.postMessage({ type: 'PRECACHE_RECIPES' });
              }
            })
            .catch(registrationError => {
              // ÈùôÈªòÂ§ÑÁêÜÊ≥®ÂÜåÈîôËØØÔºåÈÅøÂÖçÊéßÂà∂Âè∞Êä•Èîô
              console.log('Service Worker registration failed:', registrationError);
            });
        });
      }
    </script>
</body>
</html> 